<app-login  *ngIf="isLoginPopupVisible" (closed)="hideLoginPopup()"></app-login>
<div class="flex max-w-[1440px] mx-auto relative h-full">
  <!-- Sidebar -->
  <aside id="sidebar"
    class="fixed inset-y-0 left-0 w-56 border-r border-[#d6dcd4] px-6 py-8 text-sm text-[#0f0f0f] transform -translate-x-full md:translate-x-0 md:flex md:flex-col md:justify-between">
    <div>
      <div class="mb-10">
        <h1 class="font-black text-2xl mb-8 cursor-pointer select-text"
          style="font-family: 'Arial Black', Arial, sans-serif;">
          vimeo
        </h1>
        <nav class="space-y-6">
          <button class="flex items-center space-x-3 text-[#0f0f0f] hover:text-black cursor-pointer">
            <i class="fas fa-home text-lg">
            </i>
            <span>
              Home
            </span>
          </button>
          <button class="flex items-center space-x-3 text-[#0f0f0f] hover:text-black cursor-pointer">
            <i class="fas fa-archive text-lg">
            </i>
            <span>
              Library
            </span>
          </button>
          <button class="flex items-center space-x-3 text-[#0f0f0f] hover:text-black cursor-pointer">
            <i class="fas fa-broadcast-tower text-lg">
            </i>
            <span>
              Live events
            </span>
          </button>
          <button class="flex items-center space-x-3 text-[#0f0f0f] hover:text-black cursor-pointer">
            <i class="fas fa-th-large text-lg">
            </i>
            <span>
              Showcases
            </span>
          </button>
          <button class="flex items-center space-x-3 text-[#0f0f0f] hover:text-black cursor-pointer">
            <i class="fas fa-chart-bar text-lg">
            </i>
            <span>
              Analytics
            </span>
          </button>
        </nav>
      </div>
      <div class="mb-6">
        <div class="flex items-center space-x-1 text-[#0f0f0f] font-semibold cursor-pointer select-text">
          <span>
            Starred
          </span>
          <i class="fas fa-chevron-up text-xs">
          </i>
        </div>
        <p class="mt-2 text-xs text-[#6b6b6b] leading-tight max-w-[180px] select-text">
          Hover over a folder or video to add it to Starred
        </p>
      </div>
      <div class="flex items-center space-x-2 text-xs text-[#0f0f0f] font-semibold mb-6 cursor-default select-text">
        <span>
          (sp)
        </span>
        <span>
          Watch
        </span>
      </div>
    </div>
  </aside>
  <!-- Overlay for sidebar on mobile -->
  <div id="overlay" class="fixed inset-0 bg-black bg-opacity-30 z-20 hidden md:hidden"></div>
  <!-- Main content -->
  <main class="flex-1 scrollbar-thin">
    <!-- Top bar -->
    <header class="flex p-6 items-center justify-between mb-6 sticky top-0 bg-white z-10">
      <div class="flex items-center space-x-3">
        <!-- Hamburger icon for sidebar toggle on mobile -->
        <button id="sidebarToggle" aria-label="Toggle sidebar"
          class="md:hidden text-[#0f0f0f] text-lg p-2 rounded-full hover:bg-gray-200 transition">
          <i class="fas fa-bars">
          </i>
        </button>
        <!-- Search form hidden on small screens -->
        <form id="searchForm"
          class="hidden md:flex items-center flex-1 max-w-xl bg-white rounded-full px-4 py-2 shadow-sm">
          <button class="text-gray-500 pr-2" type="button">
            <i class="fas fa-globe-americas">
            </i>
          </button>
          <input aria-label="Search" class="flex-1 outline-none text-sm text-[#0f0f0f] placeholder:text-[#6b6b6b]"
            placeholder="Search video . . ." type="search" value="" />
          <button class="text-gray-500 pl-2" type="button">
            <i class="fas fa-times-circle">
            </i>
          </button>
        </form>
        <!-- Search icon visible on small screens -->
        <button id="searchToggle" aria-label="Open search"
          class="md:hidden text-[#0f0f0f] text-lg p-2 rounded-full hover:bg-gray-200 transition">
          <i class="fas fa-search">
          </i>
        </button>
      </div>
      <div *ngIf="isLogin" class=" flex items-center space-x-4 ml-6">
        <button aria-label="Help" class="text-[#0f0f0f] text-lg cursor-pointer">
          <i class="fas fa-question-circle">
          </i>
        </button>
        <button aria-label="Notifications" class="relative text-[#0f0f0f] text-lg cursor-pointer">
          <i class="fas fa-bell">
          </i>
          <span class="absolute -top-1 -right-1 bg-red-600 rounded-full w-2 h-2">
          </span>
        </button>
        <div class="relative">
          <button aria-expanded="false" aria-haspopup="true"
            class="bg-[#0f0f0f] text-white text-sm font-semibold rounded-full px-4 py-1 flex items-center space-x-1 cursor-pointer select-none">
            <span>
              New
            </span>
            <i class="fas fa-chevron-down text-xs">
            </i>
          </button>
        </div>
        <img alt="User profile picture, circular avatar with placeholder letter U on gray background"
          class="w-8 h-8 rounded-full object-cover cursor-pointer" height="32"
          src="https://storage.googleapis.com/a1aa/image/5439c7eb-5950-47e4-2f3e-dafe5cbf4541.jpg" width="32" />
      </div>
      <div *ngIf="!isLogin" class="ml-auto flex items-center space-x-4">
        <button aria-label="Help"
            class="text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-full p-1"
            type="button">
            <i class="fas fa-question-circle text-lg">
            </i>
        </button>
        <button
            class="text-gray-700 font-semibold text-sm hover:text-black focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-3 py-1"
            type="button">
            Pricing
        </button>
        <button (click)="showLoginPopup()"
            class="text-gray-700 font-semibold text-sm hover:text-black focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-3 py-1"
            type="button">
            Log in
        </button>
       
        <button
            class="bg-blue-500 text-white font-semibold text-sm rounded-full px-4 py-1.5 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500"
            type="button">
            Join
        </button>
    </div>
    </header>
    <!-- Results count and sort -->
    <div class="flex justify-between items-center mb-4 text-xs text-[#6b6b6b] select-text sticky">
      <span>
        1.82M results
      </span>
      <div class="flex items-center space-x-1 cursor-pointer select-text">
        <span>
          Relevance
        </span>
        <i class="fas fa-chevron-down text-[10px]">
        </i>
      </div>
    </div>
    <!-- Video list for mobile, grid for md+ with 4 columns on lg+ -->
    <section class="flex flex-col md:grid md:grid-cols-2 md:sm:grid-cols-3 lg:grid-cols-4 gap-x-6 gap-y-8 pr-2"
      style="scrollbar-width: thin; scrollbar-color: #cbd5e1 transparent;">
      <!-- <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4">

      </div> -->
      <article *ngFor="let video of videoList" (click)="navigateToDetail(video.id)" class="flex flex-col md:block space-y-1 cursor-pointer select-text">
        <div class="relative rounded-md overflow-hidden flex-shrink-0 md:block md:w-full">
          <app-video-card [videoData]="video" [src]="video.url"></app-video-card>
          <span
            class="absolute bottom-1 right-1 bg-black bg-opacity-70 text-white text-[10px] px-1 rounded select-none">
            10:55
          </span>
        </div>
        <div class="flex items-center space-x-2 text-xs text-[#6b6b6b] mt-2 md:mt-0">
          <img alt="Peter Moussa profile picture, circular avatar with letter P on gray background"
            class="w-5 h-5 rounded-full object-cover" height="20"
            src="https://storage.googleapis.com/a1aa/image/9ae27665-7959-4471-2fba-f9ebc6831831.jpg" width="20" />
          <span class="font-semibold text-[13px] text-[#0f0f0f] truncate max-w-[180px]">
            {{ video.description }}
          </span>
        </div>
        <p class="text-[11px] text-[#6b6b6b] leading-tight select-text max-w-[180px] truncate">
          {{ video.userNavigationDto.userName}}
        </p>
        <p class="text-[10px] text-[#6b6b6b] leading-tight select-text max-w-[180px] truncate">
          3,726 views • {{ video.uploadedAt  | date: 'MMMM d, y'}}
        </p>
      </article>

      <!-- Video 1 -->
      <!-- <article class="flex flex-col md:block space-y-1 cursor-pointer select-text">
        <div class="relative rounded-md overflow-hidden flex-shrink-0 md:block md:w-full">
          <img alt="Outdoor art installation with buildings in background, video thumbnail"
            class="w-full h-auto object-cover rounded-md" height="180"
            src="https://storage.googleapis.com/a1aa/image/58024d3a-b5af-4432-d715-a4fc03be4813.jpg" width="320" />

          <video class="w-full h-auto object-cover rounded-md" height="180" width="320" controls>
            <source src="https://www.youtube.com/watch?v=9QcEC3skKH4" type="video/mp4">
            Trình duyệt của bạn không hỗ trợ video này.
          </video> <span
            class="absolute bottom-1 right-1 bg-black bg-opacity-70 text-white text-[10px] px-1 rounded select-none">
            10:55
          </span>
        </div>
        <div class="flex items-center space-x-2 text-xs text-[#6b6b6b] mt-2 md:mt-0">
          <img alt="Peter Moussa profile picture, circular avatar with letter P on gray background"
            class="w-5 h-5 rounded-full object-cover" height="20"
            src="https://storage.googleapis.com/a1aa/image/9ae27665-7959-4471-2fba-f9ebc6831831.jpg" width="20" />
          <span class="font-semibold text-[13px] text-[#0f0f0f] truncate max-w-[180px]">
            ART NOT ART - Documentary a...
          </span>
        </div>
        <p class="text-[11px] text-[#6b6b6b] leading-tight select-text max-w-[180px] truncate">
          Peter Moussa
        </p>
        <p class="text-[10px] text-[#6b6b6b] leading-tight select-text max-w-[180px] truncate">
          3,726 views • April 30, 2017
        </p>
      </article> -->
    </section>
  </main>
  <!-- Search bar overlay for mobile -->
  <div id="searchOverlay" class="fixed inset-0 bg-black bg-opacity-30 z-20 hidden"></div>
  <div id="searchBarMobile" class="fixed top-0 left-0 right-0 z-30 p-4 bg-white shadow-md rounded-b-md hidden">
    <form class="flex items-center max-w-xl mx-auto bg-white rounded-full px-4 py-2 shadow-sm">
      <button class="text-gray-500 pr-2" type="button">
        <i class="fas fa-globe-americas">
        </i>
      </button>
      <input aria-label="Search" class="flex-1 outline-none text-sm text-[#0f0f0f] placeholder:text-[#6b6b6b]"
        placeholder="art" type="search" value="art" />
      <button id="searchCloseMobile" class="text-gray-500 pl-2" type="button">
        <i class="fas fa-times-circle">
        </i>
      </button>
    </form>
  </div>
</div>
<script>
  const sidebar = document.getElementById('sidebar');
  const overlay = document.getElementById('overlay');
  const sidebarToggle = document.getElementById('sidebarToggle');
  const searchToggle = document.getElementById('searchToggle');
  const searchForm = document.getElementById('searchForm');
  const searchBarMobile = document.getElementById('searchBarMobile');
  const searchOverlay = document.getElementById('searchOverlay');
  const searchCloseMobile = document.getElementById('searchCloseMobile');

  // Toggle sidebar on mobile
  sidebarToggle.addEventListener('click', () => {
    const isHidden = sidebar.classList.contains('-translate-x-full');
    if (isHidden) {
      sidebar.classList.remove('-translate-x-full');
      overlay.classList.remove('hidden');
      // Hide search bar if open
      searchBarMobile.classList.add('hidden');
      searchOverlay.classList.add('hidden');
    } else {
      sidebar.classList.add('-translate-x-full');
      overlay.classList.add('hidden');
    }
  });

  // Clicking overlay closes sidebar
  overlay.addEventListener('click', () => {
    sidebar.classList.add('-translate-x-full');
    overlay.classList.add('hidden');
  });

  // Toggle search bar on mobile
  searchToggle.addEventListener('click', () => {
    const isHidden = searchBarMobile.classList.contains('hidden');
    if (isHidden) {
      searchBarMobile.classList.remove('hidden');
      searchOverlay.classList.remove('hidden');
      // Hide sidebar if open
      sidebar.classList.add('-translate-x-full');
      overlay.classList.add('hidden');
    } else {
      searchBarMobile.classList.add('hidden');
      searchOverlay.classList.add('hidden');
    }
  });

  // Clicking search overlay closes search bar
  searchOverlay.addEventListener('click', () => {
    searchBarMobile.classList.add('hidden');
    searchOverlay.classList.add('hidden');
  });

  // Close search bar mobile on close button click
  searchCloseMobile.addEventListener('click', () => {
    searchBarMobile.classList.add('hidden');
    searchOverlay.classList.add('hidden');
  });
</script>